:root {
  --controlSize: clamp(
    var(--size__xl),
    var(--type__size--target),
    var(--size__xxl)
  );
  --controlFontSize: var(--type__size--m);
  --controlLineheight: var(--type__lineheight--l);
  --controlPadding: var(--size__s) var(--size__m);
}

.button {
  &__primary,
  &__secondary,
  &__tertiary {
    --color__focus: var(--color__highlight--semi);
    align-items: center;
    border-radius: var(--size__s);
    display: inline-flex;
    font-size: var(--controlFontSize);
    justify-content: center;
    line-height: var(--controlLineheight);
    min-height: var(--controlSize);
    transition: 0.375s ease-in;
    transition-property: background-color border-color color opacity;
    &:focus-visible {
      box-shadow: 0 0 0 var(--size__xs) var(--color__focus);
    }
  }
  &__primary,
  &__secondary {
    border: var(--size__xxs) solid;
    padding: var(--controlPadding);
  }
  &__primary {
    background-color: var(--color__highlight);
    border-color: var(--color__highlight);
    color: var(--color__contrast);
    &:focus,
    &:hover {
      background-color: var(--color__highlight--ish);
    }
  }
  &__secondary {
    background-color: var(--color__contrast);
    border-color: var(--color__base--light);
    color: var(--color__base--mid);
    &:focus,
    &:hover {
      border-color: var(--color__base--semi);
      color: var(--color__base);
    }
  }
  &__tertiary {
    &:focus,
    &:hover {
      opacity: 0.75;
    }
  }
}
.control {
  &__input legend,
  &__select legend,
  &__checkbox legend,
  &__radio legend,
  &__toggle legend,
  &__input label,
  &__select label {
    color: var(--color__base--mid);
    display: block;
    font-size: var(--type__size--xs);
    font-weight: 600;
    letter-spacing: var(--size__xxs);
    line-height: var(--type__lineheight--l);
    text-transform: uppercase;
    + * {
      margin-top: var(--size__s);
    }
  }
  &__input,
  &__select {
    input,
    select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-color: var(--color__contrast);
      border: var(--size__xxs) solid var(--color__base--semi);
      border-radius: var(--size__s);
      color: var(--color__base);
      font-size: var(--controlFontSize);
      line-height: var(--controlLineheight);
      min-height: var(--controlSize);
      padding: var(--controlPadding);
      transition: 0.375s ease-in;
      transition-property: background-color color;
      width: 100%;
      &::placeholder {
        color: var(--color__base--mid);
      }
      &:focus {
        outline: none;
      }
      &:focus-visible {
        box-shadow: 0 0 0 var(--size__xs) var(--color__highlight--semi);
      }
      &:hover {
        background-color: var(--color__highlight--ghost);
        border-color: var(--color__highlight);
      }
      &[disabled] {
        background-color: var(--color__base--ghost);
        color: var(--color__base--ish);
        cursor: not-allowed;
        &::placeholder {
          color: var(--color__base--semi);
        }
        &:hover {
          background-color: var(--color__base--ghost);
          border-color: var(--color__base--semi);
          cursor: not-allowed;
        }
      }
    }
    select {
      @include svgBG(
        "M16.0000258,16.5154845 L22.7701434,8.9931316 C23.8785204,7.76160154 25.7753899,7.6617663 27.00692,8.77014336 C28.2384501,9.87852042 28.3382853,11.7753899 27.2299082,13.00692 L18.2299082,23.00692 C17.0381813,24.3310611 14.9618703,24.3310611 13.7701434,23.00692 L4.77014336,13.00692 C3.6617663,11.7753899 3.76160154,9.87852042 4.9931316,8.77014336 C6.22466167,7.6617663 8.12153118,7.76160154 9.22990824,8.9931316 L16.0000258,16.5154845 Z",
        currentColor,
        "0.5"
      );
      background-position: calc(100% - var(--size__m)) center;
      background-repeat: no-repeat;
      text-indent: 0.01px;
      text-overflow: "";
    }
  }
  &__checkbox,
  &__radio,
  &__toggle {
    label {
      align-items: center;
      cursor: pointer;
      display: inline-flex;
      grid-gap: var(--size__s);
      grid-auto-flow: column;
      > span {
        align-items: center;
        display: inline-flex;
      }
      + label {
        margin-left: var(--size__m);
      }
    }
    input[type="checkbox"],
    input[type="radio"] {
      opacity: 0;
      &:focus {
        outline: none;
      }
      &:focus-visible + span:before {
        box-shadow: 0 0 0 var(--size__xs) var(--color__highlight--semi);
      }
      + span:before {
        --size: calc(var(--size__m) + var(--size__s));
        align-items: center;
        background-color: var(--color__contrast);
        background-position: center;
        background-repeat: no-repeat;
        border: var(--size__xxs) solid var(--color__base--semi);
        color: var(--color__base--semi);
        content: "";
        display: inline-flex;
        height: var(--size);
        justify-content: center;
        margin-left: calc(var(--size) * -1);
        margin-right: var(--size__s);
        transition: 0.375s ease-in;
        transition-property: background-color box-shadow color;
        width: var(--size);
      }
      &:hover + span:before {
        border-color: var(--color__base--mid);
      }
      &:checked + span:before {
        background-color: var(--color__highlight);
      }
      &:checked:hover + span:before {
        background-color: var(--color__highlight--ish);
      }
      &[disabled] {
        + span {
          color: var(--color__base--mid);
          cursor: not-allowed;
        }
        + span:before {
          background-color: var(--color__base--ghost);
          border-color: var(--color__base--light);
        }
        &:checked + span:before {
          background-color: var(--color__base--mid);
          color: var(--color__base--mid);
        }
      }
    }
    input[type="checkbox"] {
      + span:before {
        border-radius: var(--size__xs);
        font-size: var(--type__size--xs);
        font-weight: bold;
      }
      &:checked + span:before {
        @include svgBG(
          "M22.5041679,5.33621823 C23.4232253,3.95763217 25.2858333,3.58511056 26.6644194,4.50416794 C28.0430055,5.42322532 28.4155271,7.28583334 27.4964697,8.66441941 L15.4964697,26.6644194 C14.3090036,28.4456186 11.6916341,28.4456186 10.5041679,26.6644194 L4.50416794,17.6644194 C3.58511056,16.2858333 3.95763217,14.4232253 5.33621823,13.5041679 C6.7148043,12.5851106 8.57741233,12.9576322 9.4964697,14.3362182 L13.0003188,19.5919919 L22.5041679,5.33621823 Z",
          white
        );
      }
    }
    input[type="radio"] {
      + span:before {
        border-radius: 50%;
      }
      &:checked + span:before {
        box-shadow: inset 0 0 0 calc(var(--size__xxs) * 2)
          var(--color__contrast);
      }
      &:checked:focus-visible + span:before {
        box-shadow: 0 0 0 var(--size__xs) var(--color__highlight--semi),
          inset 0 0 0 calc(var(--size__xxs) * 2) var(--color__contrast);
      }
    }
    span {
      color: var(--color__base);
      font-size: var(--controlFontSize);
      line-height: var(--controlLineheight);
    }
  }
  &__toggle {
    input[type="checkbox"] {
      + span:before {
        background-position-x: left;
        border-radius: calc(var(--size) / 2);
        width: var(--size__xl);
      }
      + span:before,
      &[disabled] + span:before {
        background-color: var(--color__base--light);
      }
      + span:before,
      &:checked + span:before {
        background-image: url("data:image/svg+xml,%3Csvg height='22' width='22' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle fill='white' cx='16' cy='16' r='16'/%3E%3C/svg%3E");
      }
      &:checked + span:before {
        background-position-x: right;
      }
    }
  }
}
